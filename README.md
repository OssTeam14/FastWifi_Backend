# ê´‘ìš´ëŒ€í•™êµ ì™€ì´íŒŒì´ ì†ë„ ì œê³µ ì›¹ ì„œë¹„ìŠ¤

## KwFastWifi Back-end

![Static Badge](https://img.shields.io/badge/verson-1.0.1-blue)   

## ğŸ‘¥ë§´ë²„ ì†Œê°œ

<table>
    <thead>
        <tr>
            <th style="text-align:center;"><a href="https://github.com/ckdals4600">ì†ì°½ë¯¼</a></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><img src="https://avatars.githubusercontent.com/u/57699212?v=4" width="150"/></td>
        </tr>
        <tr>
            <td style="text-align:center;">Back-End Developer</td>
        </tr>
    </tbody>
</table>

## ğŸ”—ê´€ë ¨ ë§í¬

> Back-end: [KwFastWifiBack](https://github.com/OssTeam14/FastWifi_Backend)   
Front-end: [KwFastWifiBack](https://github.com/OssTeam14/FastWifi_Front)   
Web site : <https://github.com/OssTeam14/FastWifi>


## ğŸ”ê¸°ëŠ¥ ì†Œê°œ

### âœ¨ê±´ë¬¼ë³„ì— ë”°ë¥¸ í•™êµ ì™€ì´íŒŒì´ ë¦¬ìŠ¤íŠ¸ ì œê³µ
  * ìƒˆë¹›ê´€
  * ì°¸ë¹›ê´€
  * ë¹„ë§ˆê´€
  * ë¹„ë§ˆê´€
  * **ê·¸ì™¸ ê±´ë¬¼ ì •ë³´ ì¶”í›„ ì—…ë°ì´íŠ¸ ì˜ˆì •**

### âœ¨í•™êµ ì™€ì´íŒŒì´ ì„¸ë¶€ ì •ë³´ ì œê³µ
  * ë‹¤ìš´ë¡œë“œ ì†ë„
  * ì—…ë¡œë“œ ì†ë„
  * ë¹„ë°€ë²ˆí˜¸ (ê¶Œí•œ í•„ìš”)
  * ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ë‚ ì§œ 

### âœ¨ì´ë©”ì¼ ì¸ì¦ì— ë”°ë¥¸ ë¡œê·¸ì¸
  * í•™êµ ì´ë©”ì¼ ì¸ì¦ ì‹œ ìë™ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê¶Œí•œ ì œê³µ


## ğŸ“ƒ ê¸°ìˆ  ìŠ¤íƒ

### ìš”êµ¬ì‚¬í•­
> ![Static Badge](https://img.shields.io/badge/Framework-%23121011?style=for-the-badge&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/2.7.17-515151?style=for-the-badge&style=for-the-badge)   
![Static Badge](https://img.shields.io/badge/Build-%23121011?style=for-the-badge&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=Gradle&logoColor=white&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/7.1.1-515151?style=for-the-badge&style=for-the-badge)   
![Static Badge](https://img.shields.io/badge/Language-%23121011?style=for-the-badge&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/java-%23ED8B00?style=for-the-badge&logo=openjdk&logoColor=white&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/17-515151?style=for-the-badge&style=for-the-badge)   
![Static Badge](https://img.shields.io/badge/Project%20Encoding-%23121011?style=for-the-badge&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/UTF-8-EA2328?style=for-the-badge&style=for-the-badge)
>
### Environment

![Static Badge](https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white&style=for-the-badge&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/Intellij-000000?style=for-the-badge&logo=intellijidea&logoColor=white&style=for-the-badge&style=for-the-badge)

### DateBase
![Static Badge](https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white&style=for-the-badge)



### FrameWork
![Static Badge](https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white&style=for-the-badge)
![Static Badge](https://img.shields.io/badge/jWT-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white&style=for-the-badge)


### Infrastructure
![Static Badge](https://img.shields.io/badge/AWS%20lightSail-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white&style=for-the-badge)


## â­ ì‹œì‘ ê°€ì´ë“œ

### ì„¤ì¹˜ ë°©ë²•

---

#### í”„ë¡œì íŠ¸ íŒŒì¼ ì„¤ì¹˜

```shell
$ git clone https://github.com/OssTeam14/FastWifi_Backend.git
$ cd FastWifi_Backend
```

#### Redis ì„¤ì¹˜
1. apt ìµœì‹ í™”
```shell
$ sudo apt-get update
$ sudo apt-get upgrade
```

2. redis-server ì„¤ì¹˜
```shell
# ì„¤ì¹˜
$ sudo apt-get install redis-server

# ì„¤ì¹˜(ë²„ì „) í™•ì¸
$ redis-server --version
```

3. redis ê¸°ì´ˆ ì„¤ì •
```shell
# vi í¸ì§‘ê¸°ë¡œ ì„¤ì • íŒŒì¼ ì¡°íšŒ(redis.conf)
sudo vi /etc/redis/redis.conf
```
* ì•„ë˜ ë‚´ìš© ì¶”ê°€
```shell
# ìµœëŒ€ ë©”ëª¨ë¦¬ ì‚¬ì–‘
# ->    ìµœëŒ€ ì‚¬ìš© ë©”ëª¨ë¦¬ ì‚¬ì–‘ì„ 256mbë¡œ ì„¤ì •í•œë‹¤. ë‹¨ìœ„ëŠ” mbë‚˜ g ë“± í•„ìš”ì— ë§ì¶° ì ì–´ì£¼ë©´ëœë‹¤.
maxmemory 256mb            

# ë©”ëª¨ë¦¬ ì´ˆê³¼ ì‚¬ìš© ì‹œ í›„ì²˜ë¦¬ ë°©ì‹ ì„¤ì •
# ->    ì§€ê¸ˆ ì„¤ì •í•œ allkeys-lru ì˜µì…˜ì€ ê°€ì¥ ì˜¤ë˜ëœ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³ , ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì˜µì…˜ì´ë‹¤.
maxmemory-policy allkeys-lru

# í”„ë¡œì„¸ìŠ¤ í¬íŠ¸
# ->    port ë¶€ë¶„ì€ ì´ˆê¸°ì— ì£¼ì„ì²˜ë¦¬ê°€ ë˜ì–´ ìˆëŠ”ë°, ë””í´íŠ¸ ê°’ìœ¼ë¡œ 6379 í¬íŠ¸ì—ì„œ ë™ì‘í•œë‹¤. 
# ->    ë§Œì•½, 6379ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í¬íŠ¸ë¥¼ ì„¤ì •í•˜ê³  ì‹¶ë‹¤ë©´ ì£¼ì„ì„ í•´ì œí•˜ê³  í¬íŠ¸ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ë©´ëœë‹¤.
port 1234

# ì™¸ë¶€ì ‘ì† í—ˆìš©
# ->    ê¸°ë³¸ ì‹¤í–‰ í™˜ê²½ì€ localhost(127.0.0.1)ë¡œ ë˜ì–´ìˆë‹¤.
# ->    ë§Œì•½, ëª¨ë“  ì™¸ë¶€ì ‘ì†ì— ëŒ€í•œ í—ˆìš©ì„ í•˜ê³  ì‹¶ë‹¤ë©´, 0.0.0.0 ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ëœë‹¤.
bind 0.0.0.0

# ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
# ->    ì„œë²„ ì ‘ì†ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ì ìš©ì‹œí‚¤ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•˜ì.
requirepass [ì ‘ì† íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥]

# ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ê°€ í•„ìš”í•˜ë‹¤ë©´, í„°ë¯¸ë„ì— ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ìƒì„± ê°€ëŠ¥í•˜ë‹¤.
echo "MyPassword" | sha256sum
```

4. redis ì¬ì‹¤í–‰ ë° ì‹¤í–‰ í™•ì¸
```shell
# ë ˆë””ìŠ¤ í”„ë¡œì„¸ìŠ¤ ì¬ì‹œì‘
sudo systemctl restart redis-server.service

# ì‹¤í–‰í™•ì¸
netstat -tnlp | grep [ë ˆë””ìŠ¤ ì‹¤í–‰í¬íŠ¸]
```

### í”„ë¡œì íŠ¸ ì…‹íŒ…

---

#### application.yml
```yaml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://DBì£¼ì†Œ/ì‚¬ìš©í•  DB ì´ë¦„?useSSL=false&useUnicode=true&serverTimezone=Asia/Seoul
    username: ì•„ì´ë””
    password: ë¹„ë²ˆ

  jpa:
    show-sql: true
    database: mysql
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true

  jwt:
    secret: c3ByaW5nLWJvb3Qtc2VjdXJpdHktand0LXR1dG9yaWFsLWppd29vbi1zcHJpbmctYm9vdC1zZWN1cml0eS1qd3QtdHV0b3JpYWwK
    access-token-valid-minute: token ìœ íš¨ ì‹œê°„

  redis:
    host: ì„œë²„ ì£¼ì†Œ
    port: 6379
    password : redis ë¹„ë°€ ë²ˆí˜¸

  mail:
    host: smtp.gmail.com
    port: 587
    username: gmail ì•„ì´ë””
    password: ì•± ë¹„ë°€ë²ˆí˜¸
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000
    auth-code-expiration-millis: 1000*60*10
```

#### êµ¬ê¸€ SMTP ì„¤ì •   
ì°¸ê³  ìë£Œ : [ì¦ì½”ë”© - KINcodingì˜ Google - Gmail SMTP ì‚¬ìš©ì„ ìœ„í•œ ì„¸íŒ…](https://kincoding.com/entry/Google-Gmail-SMTP-%EC%82%AC%EC%9A%A9%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%84%B8%ED%8C%85)   
  
#### í•™êµ ë©”ì¼ ì¸ì¦ ì„¤ì •
```java
public final class Constants {
    ~~~
    
    public static final String KW_MAIL_REGEXP = "^[A-Za-z0-9._%+-]+@í•™êµ ë©”ì¼ ì£¼ì†Œ$";
    
    ~~~
}

```

### ì‹¤í–‰ ë°©ë²• - ë¦¬ëˆ…ìŠ¤ í™˜ê²½

---

#### 1. í”„ë¡œì íŠ¸ ë¹Œë“œ ìˆ˜í–‰ íŒŒì¼ ìƒì„±

* íŒŒì¼ëª….sh 

```shell
#!/bin/bash

#1
REPOSITORY=#FastWifi_Backend ìƒìœ„ í´ë” ê²½ë¡œ
PROJECT_NAME=FastWifi_Backend

#2
cd $REPOSITORY/$PROJECT_NAME/

#3
echo "> GIT PULL"
git pull origin main

#4
echo "> Project Build Start"

./gradlew build

#5
echo "> Move to app Directory"

cd $REPOSITORY

#6
echo "> Duplicate Build file"

cp $REPOSITORY/$PROJECT_NAME/build/libs/*.jar $REPOSITORY/

#7
echo "> Kill Use :8080 PID"
USE_8080_PID=$(lsof -i :8080 | grep LISTEN | awk '{print $2}')
kill -9 $USE_8080_PID

#8
echo "> Check The Currently Running Application PID"

CURRENT_PID=$(pgrep -f ${PROJECT_NAME}.*.jar)

echo "Currently Running Application PID: $CURRENT_PID"

#7
if [ $CURRENT_PID -z ]
then
	echo "> Since there are no applications currently running, it will not terminate."
else
	echo "kill -15 $CURRENT_PID"
	kill -15 $CURRENT_PID
	sleep 5
fi

echo "> New Application Deploy"

#8
JAR_NAME=$(ls -tr $REPOSITORY/ | grep jar | tail -n 1)

echo "> JAR Name: $JAR_NAME"
```

2. ë¹Œë“œ ìˆ˜í–‰ íŒŒì¼ ì‹¤í–‰

```shell
$ ./íŒŒì¼ëª….sh
```


## âš™ ì‹œìŠ¤í…œ ì•„í‚¤í…ì³

![systmeAricthure.png](systmeAricthure.png)


## ğŸ“‚ í´ë” êµ¬ì¡°

```
ğŸ“‚ src
â”£ ğŸ“‚ main
â”ƒ  â”£ ğŸ“‚ java.com.dnd.exercise
â”ƒ  â”£ ğŸ“‚ auth
â”ƒ  â”ƒ  â”£ ğŸ“‚ controller
â”ƒ  â”ƒ  â”£ ğŸ“‚ dto
â”ƒ  â”ƒ  â”ƒ  â”£ ğŸ“‚ request
â”ƒ  â”ƒ  â”ƒ  â”£ ğŸ“‚ response
â”ƒ  â”ƒ  â”£ ğŸ“‚ repository
â”ƒ  â”ƒ  â”£ ğŸ“‚ service
â”ƒ  â”£ ğŸ“‚ common
â”ƒ  â”ƒ â”£ BaseEntity.enum
â”ƒ  â”ƒ â”£ constant.class
â”ƒ  â”ƒ â”£ ResponseDto.class
â”ƒ  â”ƒ â”£ RedisService.class
â”ƒ  â”£ ğŸ“‚ config
â”ƒ  â”ƒ  â”ƒ  â”£ CorsConfig.class
â”ƒ  â”ƒ  â”ƒ  â”£ EmailConfig.class
â”ƒ  â”ƒ  â”ƒ  â”£ RedisConfig.class
â”ƒ  â”ƒ  â”ƒ  â”£ SecurityConfig.class
â”ƒ  â”ƒ  â”ƒ  â”£ WebConfig.class
â”ƒ  â”£ ğŸ“‚ error
â”ƒ  â”£ ğŸ“‚ dto
â”ƒ  â”ƒ  â”ƒ  â”£ ErrorResponse.class
â”ƒ  â”ƒ  â”ƒ  â”£ ErrorCode
â”ƒ  â”ƒ  â”£ ğŸ“‚ exception
â”ƒ  â”ƒ  â”ƒ  â”£ BusinessException.class
â”ƒ  â”ƒ  â”£ ğŸ“‚ handler
â”ƒ  â”ƒ  â”ƒ  â”£ GlobalExceptionHandler.class
â”ƒ  â”£ ğŸ“‚ jwt
â”ƒ  â”£ ğŸ“‚ member
â”ƒ  â”ƒ  â”£ ğŸ“‚ entity
â”ƒ  â”ƒ  â”£ ğŸ“‚ repository
â”ƒ  â”£ ğŸ“‚ verification
â”ƒ  â”ƒ  â”£ ğŸ“‚ controller
â”ƒ  â”ƒ  â”£ ğŸ“‚ dto
â”ƒ  â”ƒ  â”ƒ  â”£ ğŸ“‚ request
â”ƒ  â”ƒ  â”ƒ  â”£ VerifyingType.enum
â”ƒ  â”ƒ  â”£ ğŸ“‚ service
â”ƒ  â”£ ğŸ“‚ wifi
â”ƒ  â”ƒ  â”£ ğŸ“‚ controller
â”ƒ  â”ƒ  â”£ ğŸ“‚ dto
â”ƒ  â”ƒ  â”ƒ  â”£ ğŸ“‚ enum
â”ƒ  â”ƒ  â”ƒ  â”£ ğŸ“‚ request
â”ƒ  â”ƒ  â”ƒ  â”£ ğŸ“‚ response
â”ƒ  â”ƒ  â”ƒ  â”£ WifiMapper.class
â”ƒ  â”ƒ  â”£ ğŸ“‚ entity
â”ƒ  â”ƒ  â”£ ğŸ“‚ repository
â”ƒ  â”ƒ  â”£ ğŸ“‚ service
â”£ ğŸ“‚ resources
â”ƒ  â”£ ğŸ“‚ static
â”ƒ  â”£ ğŸ“‚ templates
â”ƒ  â”£ application.properties
â”£ FastWifiApplication.class
```

## ğŸ“š ë¼ì´ì„¼ìŠ¤
```
MIT License

Copyright (c) 2023 OssTeam14

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```
 






